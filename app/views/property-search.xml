<ActionBarExtension>
    <ActionItem (tap)="goToFavourites()">
        <Button text="Faves"></Button>
    </ActionItem>
</ActionBarExtension>
<StackLayout>
    <Label class="intro" text="{{introduction}}" textWrap="true"></Label>
    <SearchBar class="searchfield" #searchField hint="Enter a location" [(ngModel)]="location.name"></SearchBar>
    <StackLayout orientation="horizontal">
        <Button text="Go" (tap)="search()"></Button>
        <Button text="My Location" (tap)="determineLocation()"></Button>
    </StackLayout>
    <StackLayout *ngIf="!error && !locationProposal">
        <Label class="caption" text="Recent searches:"></Label>
        <StackLayout *ngFor="#item of recentLocations" orientation="horizontal" (tap)="repeatRecentSearch(item)">
            <Label class="location-label" text="{{item.location.name}}"></Label>
            <Label class="results-label" text="{{item.results}}"></Label>
        </StackLayout>
    </StackLayout>
    <StackLayout *ngIf="!error && locationProposal">
        <Label class="caption" text="Please select a location below:"></Label>
        <ListView [items]="proposedLocations">
            <template #item="item">
                <StackLayout orientation="horizontal" (tap)="searchProposedLocation(item)">
                    <Label class="location-label" text="{{item.name}}"></Label>
                </StackLayout>
            </template>
        </ListView>
    </StackLayout>
    <StackLayout *ngIf="error">
        <Label class="error" [text]="errorMessage" textWrap="true"></Label>
    </StackLayout>
</StackLayout>
